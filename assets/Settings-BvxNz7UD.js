import{D as v,o as C,r as t,j as e,E as m,n as o}from"./index-DpF_DXXf.js";import{u as f,a as p}from"./react-spring_web.modern-MXv7Niox.js";function S(){v(),C(r=>r.theme.mode);const[h,g]=t.useState(""),[b,w]=t.useState(!0),[y,d]=t.useState(!1),[n,x]=t.useState({currentPassword:"",newPassword:"",confirmPassword:""}),j=f({from:{opacity:0,transform:"translateY(20px)"},to:{opacity:1,transform:"translateY(0)"},config:{duration:800}}),P=f({from:{opacity:0,transform:"scale(0.9)"},to:{opacity:1,transform:"scale(1)"},config:{duration:300}});t.useEffect(()=>{(async()=>{w(!0);try{const{data:{user:s},error:a}=await m.auth.getUser();if(a)throw a;if(!s)throw new Error("User not found. Please log in.");g(s.email||"")}catch(s){const a=s;o.error(a.message||"Failed to fetch user info.")}finally{w(!1)}})()},[]);const N=async r=>{r.preventDefault();const{currentPassword:s,newPassword:a,confirmPassword:i}=n;if(!s){o.error("Please enter your current password.");return}if(a!==i){o.error("Passwords do not match.");return}try{const{error:u}=await m.auth.signInWithPassword({email:h,password:s});if(u)throw new Error("Current password is incorrect.");const{error:l}=await m.auth.updateUser({password:a});if(l)throw l;o.success("Password changed successfully!"),d(!1),x({currentPassword:"",newPassword:"",confirmPassword:""})}catch(u){const l=u;o.error(l.message||"Failed to change password.")}},c=r=>{const{name:s,value:a}=r.target;x(i=>({...i,[s]:a}))};return b?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("p",{className:"text-slate-600",children:"Loading user info..."})}):e.jsxs(p.div,{style:j,className:"bg-slate-50 dark:bg-gray-900 min-h-screen text-slate-800 dark:text-slate-100 font-sans mt-10",children:[e.jsxs("header",{className:"bg-gradient-to-r from-slate-100 to-slate-200 dark:from-gray-800 dark:to-gray-700 py-16 px-8 text-center shadow-sm",children:[e.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-white",children:"Settings"}),e.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-300 mt-4",children:"Manage your account and preferences."})]}),e.jsx("main",{className:"py-10 px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto bg-white dark:bg-gray-800 shadow-md rounded-lg p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6",children:"Account Settings"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-slate-600 font-medium mb-2",children:"Email"}),e.jsx("input",{type:"email",value:h,disabled:!0,"aria-label":"Email address",className:"w-full px-4 py-3 bg-slate-100 border border-slate-300 rounded-lg focus:outline-none cursor-not-allowed text-slate-500"})]}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mt-10 mb-6",children:"Change Password"}),e.jsx("button",{onClick:()=>d(!0),className:"px-6 py-3 bg-blue-500 text-white rounded-lg shadow-md hover:bg-blue-400",children:"Change Password"})]})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(p.div,{style:P,className:"bg-white w-full max-w-md p-6 rounded-lg shadow-lg",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"Change Password"}),e.jsxs("form",{onSubmit:N,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-slate-600 font-medium mb-2",children:"Current Password"}),e.jsx("input",{name:"currentPassword",type:"password",value:n.currentPassword,onChange:c,"aria-label":"Current Password",placeholder:"Enter current password",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-slate-600 font-medium mb-2",children:"New Password"}),e.jsx("input",{name:"newPassword",type:"password",value:n.newPassword,onChange:c,"aria-label":"New Password",placeholder:"Enter new password",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-slate-600 font-medium mb-2",children:"Confirm Password"}),e.jsx("input",{name:"confirmPassword",type:"password",value:n.confirmPassword,onChange:c,"aria-label":"Confirm Password",placeholder:"Confirm new password",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-500 text-white rounded-lg shadow-md hover:bg-blue-400",children:"Save Password"}),e.jsx("button",{onClick:()=>d(!1),type:"button",className:"px-6 py-2 bg-gray-500 text-white rounded-lg shadow-md hover:bg-gray-400 ml-2",children:"Cancel"})]})]})]})})]})}export{S as default};
